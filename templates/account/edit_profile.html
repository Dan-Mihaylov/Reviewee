{% extends 'base.html' %}
{% load static %}

{% block title %}
    Edit Profile
{% endblock %}


{% block content %}

    <div class="edit-profile-content-strip">

        <div class="edit-profile-content-wrap">

            <!-- Card that contains a picture and the form -->
            <div class="card" style="width: 22rem;">
                <img src="{{ object.profile_picture.url }}" class="card-img-top" alt="photo">
                <div class="card-body">
                    <h5 class="card-title">{{ object }}</h5>

                    <!-- Form starts from here -->
                    <form action="{% url 'profile edit' %}" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}

                    <!-- File input -->
                    <div class="mb-3">
                        <label for="formFile" class="form-label">Change Photo</label>
                        <input class="form-control" type="file" id="formFile" name="{{ form.profile_picture.name }}"
                                accept="image/*">
                    </div>

                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="floatingInput" name="{{ form.username.name }}"
                               placeholder="Username"
                               value="{% if object.username != None %} {{ object.username }}{% endif %}">
                    </div>

                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="floatingInput" name="{{ form.first_name.name }}"
                               placeholder="First Name"
                               value="{% if object.first_name != None %} {{ object.first_name }}{% endif %}">
                    </div>

                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="floatingInput" name="{{ form.last_name.name }}"
                               placeholder="Last Name"
                               value="{% if object.last_name != None %} {{ object.last_name }}{% endif %}">
                    </div>

                    <div class="form-floating mb-3">
                        <label for="GenderSelect">Gender:</label>
                        <select class="form-control" aria-label="Gender" name="{{ form.gender.name }}"
                                name="{{ form.gender.name }}" id="GenderSelect">
                            {% for value, label in form.gender.field.choices %}
                                <option value="{{ value }}" {% if value == object.gender %}selected{% endif %}>{{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-floating mb-3">
                        <label for="DateInput">Date Of birth</label>
                        <input type="date" class="form-control"id="DateInput" name="{{ form.date_of_birth.name }}"
                               {% if form.instance.date_of_birth %} value="{{ form.instance.date_of_birth|date:'Y-m-d' }}" {% endif %}>
                    </div>

                    <div class="button-div">
                        <button type="submit" class="btn btn-dark">Save Changes</button>
                        <!-- TODO when cancel go back to wherever you came from, META/HTTPS/REFERER -->
                        <a href="{% url 'home' %}" id="btn-cancel" class="btn btn-danger">Cancel</a>
                    </div>

                    </form>

                </div>
            </div>


        </div>
    </div>

{% endblock %}

